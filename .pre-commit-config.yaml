minimum_pre_commit_version: 2.18.0
default_language_version:
  python: python3.10
files: '\.(py|md|yaml|job)$'

repos:
  # 1. Black
  # Forces consistent code style, fixing most errors automatically.
  - repo: https://github.com/psf/black
    rev: 24.3.0
    hooks:
      - id: black
        language_version: python3.10

  # 2. Autoflake
  # Cleans up imports automatically before the commit.
  - repo: https://github.com/PyCQA/autoflake
    rev: v2.3.1
    hooks:
      - id: autoflake
        args: ['--in-place', '--remove-all-unused-imports', '--remove-unused-variables']

  # 3. Flake8 (Linter for style and simple errors like Pyflakes)
  # Checks for common code quality issues and style guide violations.
  - repo: https://github.com/PyCQA/flake8
    rev: 7.0.0
    hooks:
      - id: flake8
        args: ["--max-line-length=88", "--ignore=E501,W503,E203,E704"]

  # 4. Mypy (Local)
  # Uses the 'mypy' installed in your active environment so it can see
  # installed packages like torch, transformers, etc.
  - repo: local
    hooks:
      - id: mypy
        name: mypy
        entry: python -m mypy
        language: system
        types: [python]
        # Uses your existing config file
        args: ["--config-file=mypy.ini"]
